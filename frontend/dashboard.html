<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Dashboard | Franz Finance</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<script>
  if (localStorage.getItem('logado') !== 'sim') {
    window.location.href = 'index.html';
  }
</script>

<div class="app">
  <h1>Dashboard</h1>

  <div class="card green">
    <span>Lucro do Dia</span>
    <strong id="lucro">R$ 0,00</strong>
  </div>

  <div class="card red">
    <span>Boletos Pendentes</span>
    <strong id="boletos">Nenhum</strong>
  </div>

  <button class="primary" onclick="irLancamento()">
    Lan√ßar Dia
  </button>

  <button class="primary" onclick="alert('Em breve')">
    Cadastrar Boletos
  </button>

  <button class="secondary" onclick="alert('Em breve')">
    Fechar Caixa
  </button>

  <button class="secondary" onclick="sair()">
    Sair
  </button>
</div>

<script>
  function sair() {
    localStorage.removeItem('logado');
    window.location.href = 'index.html';
  }

  function irLancamento() {
    window.location.href = 'add.html';
  }

  fetch('/lucro-dia')
    .then(res => res.json())
    .then(data => {
      let total = Number(data.total);

      if (isNaN(total)) {
        total = 0;
      }

      document.getElementById('lucro').innerText =
        `R$ ${total.toFixed(2)}`;
    })
    .catch(() => {
      document.getElementById('lucro').innerText = 'R$ 0,00';
    });
</script>

</body>
</html>
