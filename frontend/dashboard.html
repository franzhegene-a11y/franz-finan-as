<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Dashboard | Franz Finance</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<script>
  // Proteção de login
  if (localStorage.getItem('logado') !== 'sim') {
    window.location.href = 'index.html';
  }
</script>

<div class="app">
  <header>
    <h1>Dashboard</h1>
  </header>

  <main>

    <!-- LUCRO DO DIA -->
    <div class="card green">
      <span>Lucro do Dia</span>
      <strong id="lucro">R$ 0,00</strong>
    </div>

    <!-- BOLETOS -->
    <div class="card red">
      <span>Boletos Pendentes</span>
      <strong id="boletos">Nenhum</strong>
    </div>

    <!-- BOTÕES -->
    <button class="primary" onclick="location.href='add.html'">
      Lançar Dia
    </button>

    <button class="primary" onclick="location.href='boletos.html'">
      Cadastrar Boletos
    </button>

    <button class="secondary" onclick="location.href='fechar-caixa.html'">
      Fechar Caixa
    </button>

    <button class="secondary" onclick="logout()">
      Sair
    </button>

  </main>
</div>

<script>
  function logout() {
    localStorage.removeItem('logado');
    window.location.href = 'index.html';
  }

  // BUSCAR LUCRO DO DIA (API REAL)
  fetch('/lucro-dia')
    .then(res => res.json())
    .then(data => {
      const total = Number(data.total) || 0;
      document.getElementById('lucro').innerText =
        `R$ ${total.toFixed(2)}`;
    })
    .catch(() => {
      document.getElementById('lucro').innerText = 'R$ 0,00';
    });

  // BUSCAR BOLETOS PENDENTES (placeholder por enquanto)
  fetch('/boletos-pendentes')
    .then(res => res.json())
    .then(data => {
      document.getElementById('boletos').innerText =
        data.total > 0 ? `${data.total} pendente(s)` : 'Nenhum';
    })
    .catch(() => {
      document.getElementById('boletos').innerText = 'Nenhum';
    });
</script>

</body>
</html>
